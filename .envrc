# ----------------------------------------------------------
# direnv configuration for narraytica
# ----------------------------------------------------------

# Stop on errors
set -e

# Load .env.local first (developer overrides)
if [ -f .env.local ]; then
  echo "Loading .env.local"
  set -a
  source .env.local
  set +a
elif [ -f .env ]; then
  echo "Loading .env"
  set -a
  source .env
  set +a
else
  echo "No .env.local or .env file found"
fi

# ----------------------------------------------------------
# Sensible defaults (only if not defined)
# ----------------------------------------------------------

export ENV="${ENV:-local}"
export LOG_LEVEL="${LOG_LEVEL:-info}"

export S3_REGION="${S3_REGION:-us-east-1}"

# Disable AWS metadata in local/dev to avoid timeouts
export AWS_EC2_METADATA_DISABLED=true

# ----------------------------------------------------------
# Python virtualenv (optional convenience)
# ----------------------------------------------------------

if [ -d ".venv" ]; then
  layout python .venv/bin/python
fi
